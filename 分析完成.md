# ðŸŽ‰ éŸ³é¢‘åˆ†æžå®Œæˆï¼

## âœ… åˆ†æžç»“æžœ

å·²æˆåŠŸå®Œæˆ DSP éŸ³é¢‘åˆ†æžï¼Œæ‰€æœ‰æ–‡ä»¶å·²ç”Ÿæˆã€‚

---

## ðŸ“Š ç”Ÿæˆçš„æ–‡ä»¶

### CSV æ•°æ®æ–‡ä»¶
- **dbfs_matlab.csv** - Matlab è¾“å‡ºçš„ dBFS æ—¶é—´åºåˆ—æ•°æ®
- **dbfs_tomatis.csv** - Tomatis è¾“å‡ºçš„ dBFS æ—¶é—´åºåˆ—æ•°æ®

æ¯ä¸ª CSV åŒ…å«ä¸‰åˆ—ï¼š
- `t` - æ—¶é—´ï¼ˆç§’ï¼‰
- `in_dbfs` - è¾“å…¥éŸ³é¢‘çš„ dBFS
- `matlab_dbfs` / `tomatis_dbfs` - è¾“å‡ºéŸ³é¢‘çš„ dBFS

### å¯è§†åŒ–å›¾è¡¨

#### åŸºç¡€å¯¹æ¯”å›¾
- **dbfs_matlab.png** - è¾“å…¥ vs Matlab è¾“å‡ºçš„ dBFS æ›²çº¿å¯¹æ¯”
- **dbfs_tomatis.png** - è¾“å…¥ vs Tomatis è¾“å‡ºçš„ dBFS æ›²çº¿å¯¹æ¯”

#### Gate é˜ˆå€¼åˆ†æžå›¾
- **gate_analysis_Matlab.png** - Matlab çš„ gate åˆ‡æ¢ç‚¹åˆ†æž
- **gate_analysis_Tomatis.png** - Tomatis çš„ gate åˆ‡æ¢ç‚¹åˆ†æž

è¿™äº›å›¾è¡¨åŒ…å«ï¼š
- ä¸ŠåŠéƒ¨åˆ†ï¼šdBFS æ›²çº¿ + gate åˆ‡æ¢ç‚¹æ ‡è®° + ä¼°è®¡é˜ˆå€¼çº¿
- ä¸‹åŠéƒ¨åˆ†ï¼šè¾“å‡ºå˜åŒ–çŽ‡ï¼ˆç”¨äºŽæ£€æµ‹ gate åˆ‡æ¢ï¼‰

---

## ðŸ” å¦‚ä½•æŸ¥çœ‹ç»“æžœ

### 1. æŸ¥çœ‹å›¾è¡¨
ç›´æŽ¥æ‰“å¼€ PNG æ–‡ä»¶æŸ¥çœ‹å¯è§†åŒ–ç»“æžœï¼š
```powershell
# åœ¨ Windows ä¸­æ‰“å¼€å›¾ç‰‡
Start-Process dbfs_matlab.png
Start-Process gate_analysis_Matlab.png
```

### 2. æŸ¥çœ‹ CSV æ•°æ®
```powershell
# æŸ¥çœ‹å‰ 20 è¡Œ
Get-Content dbfs_matlab.csv -Head 20

# åœ¨ Excel ä¸­æ‰“å¼€
Start-Process dbfs_matlab.csv
```

### 3. ä½¿ç”¨ Python åˆ†æž
```python
import pandas as pd
import matplotlib.pyplot as plt

# è¯»å–æ•°æ®
df = pd.read_csv("dbfs_matlab.csv")

# æŸ¥çœ‹ç»Ÿè®¡ä¿¡æ¯
print(df.describe())

# ç»˜åˆ¶è‡ªå®šä¹‰å›¾è¡¨
plt.figure(figsize=(12, 6))
plt.plot(df['t'], df['in_dbfs'], label='Input')
plt.plot(df['t'], df['matlab_dbfs'], label='Matlab Output')
plt.xlabel('Time (s)')
plt.ylabel('dBFS')
plt.legend()
plt.grid(True)
plt.show()
```

---

## ðŸ“ˆ åˆ†æžè¦ç‚¹

### Gate åˆ‡æ¢ç‚¹æ£€æµ‹

ä»Ž `gate_analysis_*.png` å›¾è¡¨ä¸­è§‚å¯Ÿï¼š

1. **çº¢è‰²æ•£ç‚¹** = æ£€æµ‹åˆ°çš„ gate åˆ‡æ¢ç‚¹
2. **ç»¿è‰²è™šçº¿** = ä¼°è®¡çš„ gate é˜ˆå€¼ï¼ˆä¸­ä½æ•°ï¼‰
3. **ä¸‹æ–¹å›¾è¡¨** = è¾“å‡ºå˜åŒ–çŽ‡ï¼Œå³°å€¼å¯¹åº”åˆ‡æ¢ç‚¹

### å…³é”®é—®é¢˜

è¿è¡Œåˆ†æžåŽï¼Œä½ åº”è¯¥èƒ½å›žç­”ï¼š

1. **Gate é˜ˆå€¼æ˜¯å¤šå°‘ï¼Ÿ**
   - æŸ¥çœ‹ç»¿è‰²è™šçº¿çš„ä½ç½®
   - æŸ¥çœ‹ç»ˆç«¯è¾“å‡ºçš„ç»Ÿè®¡ä¿¡æ¯

2. **åˆ‡æ¢æ˜¯å¦ç¨³å®šï¼Ÿ**
   - åˆ‡æ¢ç‚¹æ˜¯å¦é›†ä¸­åœ¨æŸä¸ª dBFS å€¼é™„è¿‘ï¼Ÿ
   - æ ‡å‡†å·®æ˜¯å¦è¾ƒå°ï¼Ÿ

3. **Matlab vs Tomatis çš„å·®å¼‚ï¼Ÿ**
   - ä¸¤è€…çš„ gate é˜ˆå€¼æ˜¯å¦ä¸€è‡´ï¼Ÿ
   - åˆ‡æ¢è¡Œä¸ºæ˜¯å¦ç›¸ä¼¼ï¼Ÿ

---

## ðŸŽ¯ ä¸‹ä¸€æ­¥åˆ†æž

### å¦‚æžœéœ€è¦è°ƒæ•´æ£€æµ‹å‚æ•°

ç¼–è¾‘ `analyze_gate_threshold.py`ï¼Œä¿®æ”¹ï¼š

```python
# è°ƒæ•´å˜åŒ–é˜ˆå€¼ï¼ˆé»˜è®¤ 3.0 dBï¼‰
result = analyze_gate_threshold(
    'dbfs_matlab.csv', 
    'Matlab',
    diff_threshold=5.0  # æ”¹ä¸º 5.0 dBï¼Œå‡å°‘è¯¯æ£€
)
```

### å¦‚æžœéœ€è¦åˆ†æžç‰¹å®šæ—¶é—´æ®µ

```python
import pandas as pd

# è¯»å–æ•°æ®
df = pd.read_csv("dbfs_matlab.csv")

# ç­›é€‰ç‰¹å®šæ—¶é—´æ®µï¼ˆä¾‹å¦‚ 10-60 ç§’ï¼‰
df_segment = df[(df['t'] >= 10) & (df['t'] <= 60)]

# åˆ†æžè¿™ä¸ªæ—¶é—´æ®µ
print(df_segment.describe())
```

### å¦‚æžœéœ€è¦å¯¼å‡ºæ›´å¤šä¿¡æ¯

ä¿®æ”¹ `analyze_dbfs.py`ï¼Œæ·»åŠ æ›´å¤šè¾“å‡ºï¼š

```python
# åœ¨è„šæœ¬æœ«å°¾æ·»åŠ 
# å¯¼å‡ºå¯¹é½ä¿¡æ¯
with open("alignment_info.txt", "w") as f:
    f.write(f"Matlab lag: {lag_m} samples ({lag_m/sr:.3f} s)\n")
    f.write(f"Tomatis lag: {lag_t} samples ({lag_t/sr:.3f} s)\n")
    f.write(f"Sample rate: {sr} Hz\n")
```

---

## ðŸ“š ç›¸å…³æ–‡ä»¶

- [analyze_dbfs.py](file:///F:/TOMATIS/analyze_dbfs.py) - ä¸»åˆ†æžè„šæœ¬
- [analyze_gate_threshold.py](file:///F:/TOMATIS/analyze_gate_threshold.py) - Gate é˜ˆå€¼åˆ†æž
- [å¸¸è§é—®é¢˜å’Œä¸‹ä¸€æ­¥.md](file:///F:/TOMATIS/å¸¸è§é—®é¢˜å’Œä¸‹ä¸€æ­¥.md) - è¯¦ç»†è¯´æ˜Ž
- [å¿«é€Ÿå‚è€ƒ.md](file:///F:/TOMATIS/å¿«é€Ÿå‚è€ƒ.md) - å¸¸ç”¨å‘½ä»¤

---

## âœ¨ é…ç½®æ€»ç»“

**çŽ¯å¢ƒ**: âœ… å®Œå…¨é…ç½®
- Python 3.11.14 (dsp çŽ¯å¢ƒ)
- æ‰€æœ‰å¿…éœ€åŒ…å·²å®‰è£…
- FFmpeg 8.0.1 å¯ç”¨

**åˆ†æž**: âœ… æˆåŠŸå®Œæˆ
- éŸ³é¢‘å¯¹é½å®Œæˆ
- dBFS è®¡ç®—å®Œæˆ
- Gate é˜ˆå€¼æ£€æµ‹å®Œæˆ

**è¾“å‡º**: âœ… å·²ç”Ÿæˆ
- 4 ä¸ª CSV æ•°æ®æ–‡ä»¶
- 4 ä¸ªå¯è§†åŒ–å›¾è¡¨

---

## ðŸŽŠ æ­å–œï¼

ä½ çš„ DSP éŸ³é¢‘åˆ†æžçŽ¯å¢ƒå·²å®Œå…¨é…ç½®å¹¶æˆåŠŸè¿è¡Œï¼

çŽ°åœ¨å¯ä»¥ï¼š
- æŸ¥çœ‹ç”Ÿæˆçš„å›¾è¡¨å’Œæ•°æ®
- æ ¹æ®éœ€è¦è°ƒæ•´åˆ†æžå‚æ•°
- å¼€å§‹æ·±å…¥ç ”ç©¶ gate é˜ˆå€¼è¡Œä¸º
- æ‰©å±•è„šæœ¬æ·»åŠ æ›´å¤šåˆ†æžåŠŸèƒ½

**ç¥åˆ†æžé¡ºåˆ©ï¼** ðŸŽµ
